<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Russ Zaliznyak <rzaliznyak@gmail.com>">
<meta name="dcterms.date" content="2025-03-14">

<title>P-hacking is Good for Business</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script type="text/javascript">
window.PlotlyConfig = {MathJaxConfig: 'local'};
if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
if (typeof require !== 'undefined') {
require.undef("plotly");
requirejs.config({
    paths: {
        'plotly': ['https://cdn.plot.ly/plotly-2.12.1.min']
    }
});
require(['plotly'], function(Plotly) {
    window._Plotly = Plotly;
});
}
</script>



<link rel="stylesheet" href="style.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#design-significance-test" id="toc-design-significance-test" class="nav-link" data-scroll-target="#design-significance-test">Design Significance Test</a></li>
  <li><a href="#our-treatment-effects" id="toc-our-treatment-effects" class="nav-link" data-scroll-target="#our-treatment-effects">Our Treatment Effects</a></li>
  <li><a href="#simulate-dataset" id="toc-simulate-dataset" class="nav-link" data-scroll-target="#simulate-dataset">Simulate Dataset</a></li>
  <li><a href="#proper-significance-test" id="toc-proper-significance-test" class="nav-link" data-scroll-target="#proper-significance-test">Proper Significance Test</a>
  <ul class="collapse">
  <li><a href="#treatment-effect-100" id="toc-treatment-effect-100" class="nav-link" data-scroll-target="#treatment-effect-100">Treatment Effect &lt; 100</a></li>
  <li><a href="#treatment-effect-100-1" id="toc-treatment-effect-100-1" class="nav-link" data-scroll-target="#treatment-effect-100-1">Treatment Effect &gt; 100</a></li>
  </ul></li>
  <li><a href="#improper-significance-test" id="toc-improper-significance-test" class="nav-link" data-scroll-target="#improper-significance-test">Improper Significance Test</a>
  <ul class="collapse">
  <li><a href="#treatment-effect-100-2" id="toc-treatment-effect-100-2" class="nav-link" data-scroll-target="#treatment-effect-100-2">Treatment Effect &lt; 100</a></li>
  <li><a href="#treatment-effect-100-3" id="toc-treatment-effect-100-3" class="nav-link" data-scroll-target="#treatment-effect-100-3">Treatment Effect &gt; 100</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">P-hacking is Good for Business</h1>
<p class="subtitle lead">Using NumPy to show breaking the rules is profitable!</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Russ Zaliznyak &lt;<a href="mailto:rzaliznyak@gmail.com">rzaliznyak@gmail.com</a>&gt; </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 14, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>We learned in our last paper that <a href="https://rzaliznyak-math.github.io/numpy-random-p-value-power/#proper-p-value-practice" target="_blank"><strong>p-values</strong></a> control the rate of <code>False Positives</code> in our experiments — how often we incorrectly declare <code>Statistical Significance</code>.</p>
<p>You may have also heard that <em><strong><code>p-hacking</code></strong></em>, the practice of misusing p-values, should be avoided because it inflates <code>False Positive</code> rates.</p>
<p>While the aforementioned claim is absolutely true, here we will use <em><strong><code>NumPy</code></strong></em> simulations to show that in many cases, it is profitable to engage in <code>p-hacking</code>.</p>
</section>
<section id="design-significance-test" class="level1">
<h1>Design Significance Test</h1>
<p>Let’s use our traditional website example.</p>
<p>Assume our existing website converts 50% of customers to paying subscribers.<br> We have a new website we think generates a lift of 101% — or a delta-to-control = 0.50%.</p>
<div id="cell-fig-mde" class="cell" data-execution_count="3">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>control_mean <span class="op">=</span> <span class="fl">0.50</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>min_number_test_days <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>max_number_test_days <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>alpha <span class="op">=</span> <span class="fl">0.05</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>power <span class="op">=</span> <span class="fl">0.80</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>index_to_control <span class="op">=</span> <span class="fl">1.01</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>treatment_mean_planned <span class="op">=</span> control_mean <span class="op">*</span> index_to_control</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>true_delta_planned <span class="op">=</span> treatment_mean_planned <span class="op">-</span> control_mean</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Max( Test Days )"</span>: [max_number_test_days],</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Conversion Rate"</span>: [<span class="ss">f"</span><span class="sc">{</span>control_mean<span class="sc">:.1%}</span><span class="ss">"</span>],</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"MDE (ITC)"</span>: [index_to_control <span class="op">*</span> <span class="dv">100</span>],</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Significance (α)"</span>: [alpha],</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Power (1 - β)"</span>: [power],</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(data)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the DataFrame</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>display(HTML(df_to_html_with_highlighted_row(df)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-mde" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mde-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th" style="border: 1px solid black; padding: 8px; width: 150px; background-color: #f0f0f0">Max( Test Days )</td>
<td data-quarto-table-cell-role="th" style="border: 1px solid black; padding: 8px; width: 150px; background-color: #f0f0f0">Conversion Rate</td>
<td data-quarto-table-cell-role="th" style="border: 1px solid black; padding: 8px; width: 150px; background-color: #f0f0f0">MDE (ITC)</td>
<td data-quarto-table-cell-role="th" style="border: 1px solid black; padding: 8px; width: 150px; background-color: #f0f0f0">Significance (α)</td>
<td data-quarto-table-cell-role="th" style="border: 1px solid black; padding: 8px; width: 150px; background-color: #f0f0f0">Power (1 - β)</td>
</tr>
<tr class="even">
<td style="border: 1px solid black; padding: 8px; width: 150px">5</td>
<td style="border: 1px solid black; padding: 8px; width: 150px">50.0%</td>
<td style="border: 1px solid black; padding: 8px; width: 150px">101.0</td>
<td style="border: 1px solid black; padding: 8px; width: 150px">0.05</td>
<td style="border: 1px solid black; padding: 8px; width: 150px">0.8</td>
</tr>
</tbody>
</table>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mde-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Minimum Detectable Effect (MDE)
</figcaption>
</figure>
</div>
</div>
<p>Using the methods from our last paper, we can calculate exactly how many <code>control</code> and <code>treatment</code> samples would be needed for this experiment.</p>
<div id="351d3e04" class="cell" data-execution_count="4">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>control_mean <span class="op">=</span> <span class="fl">0.50</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>alpha <span class="op">=</span> <span class="fl">0.05</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>power <span class="op">=</span> <span class="fl">0.80</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>index_to_control <span class="op">=</span> <span class="fl">1.01</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>treatment_mean <span class="op">=</span> control_mean <span class="op">*</span> index_to_control</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>true_delta <span class="op">=</span> treatment_mean <span class="op">-</span> control_mean</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>required_control_samples, required_treatment_samples <span class="op">=</span> two_proportion_required_samples(</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    alpha<span class="op">=</span>alpha,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    power<span class="op">=</span>power,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    control_rate<span class="op">=</span>control_mean,</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    treatment_rate<span class="op">=</span>treatment_mean,</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    control_to_treatment_ratio<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    tail_type<span class="op">=</span><span class="st">"one_tail"</span>,</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Control Samples: </span><span class="sc">{</span>required_control_samples<span class="sc">:,}</span><span class="ss">"</span>)</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Treatment Samples: </span><span class="sc">{</span>required_treatment_samples<span class="sc">:,}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Control Samples: 123,649
Treatment Samples: 123,649</code></pre>
</div>
</div>
<p>According to our calculations, with the above sample counts, our significance test has a 5% False Positive Rate and an 80% chance of detecting a winner.</p>
</section>
<section id="our-treatment-effects" class="level1">
<h1>Our Treatment Effects</h1>
<p>Before we go further; let’s make an assumption about our <code>Treatment Effects</code>.</p>
<div style="margin-top: -0px; font-size: 97%">
<div id="cell-fig-treament-effects" class="cell" data-execution_count="5">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotly.subplots <span class="im">import</span> make_subplots</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> stats</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> numpy.random <span class="im">import</span> seed</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>seed(<span class="dv">5</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>number_simulations <span class="op">=</span> <span class="bu">int</span>(<span class="fl">1e4</span>)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>null_average <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>scale <span class="op">=</span> <span class="fl">0.25</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>treatment_effect_samples <span class="op">=</span> np.random.laplace(</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    loc<span class="op">=</span>null_average, scale<span class="op">=</span>scale, size<span class="op">=</span>number_simulations</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>x_global_min <span class="op">=</span> <span class="bu">min</span>(treatment_effect_samples)</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>x_global_max <span class="op">=</span> <span class="bu">max</span>(treatment_effect_samples)</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>x_range <span class="op">=</span> np.linspace(x_global_min, x_global_max, <span class="dv">1000</span>)</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>kde <span class="op">=</span> stats.gaussian_kde(np.random.laplace(loc<span class="op">=</span><span class="dv">100</span>, scale<span class="op">=</span>scale, size<span class="op">=</span><span class="dv">50000</span>))</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>y_kde <span class="op">=</span> kde(x_range)</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate CDF</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>cdf_values <span class="op">=</span> stats.norm.cdf(x_range, loc<span class="op">=</span><span class="dv">100</span>, scale<span class="op">=</span>scale)</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure()</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>fig.add_trace(</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>    go.Scatter(</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>x_range,</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>y_kde,</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"lines"</span>,</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>        fill<span class="op">=</span><span class="st">"tozeroy"</span>,</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="ss">f"Scale: </span><span class="sc">{</span>scale<span class="sc">}</span><span class="ss">"</span>,</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">"Pr(Treatment Effect &gt; %</span><span class="sc">{x:.2f}</span><span class="st">) = %</span><span class="sc">{customdata:.2%}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>        hoverlabel<span class="op">=</span><span class="bu">dict</span>(font_size<span class="op">=</span><span class="dv">18</span>, font_family<span class="op">=</span><span class="st">"Arial"</span>),</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>        customdata<span class="op">=</span><span class="dv">1</span> <span class="op">-</span> cdf_values,</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>    <span class="co"># row=row,</span></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>    <span class="co"># col=col</span></span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>fig.update_xaxes(</span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>    title_text<span class="op">=</span><span class="st">"Potential Treatment Effect (ITC)"</span>,</span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>    showticklabels<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>    title_standoff<span class="op">=</span><span class="dv">10</span>,</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="ss">f"Treatment Effects are Laplace Distributed with μ = </span><span class="sc">{</span>null_average<span class="sc">}</span><span class="ss"> and b = </span><span class="sc">{</span>scale<span class="sc">}</span><span class="ss">"</span>,</span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>    hoverlabel<span class="op">=</span><span class="bu">dict</span>(font_size<span class="op">=</span><span class="dv">16</span>, font_family<span class="op">=</span><span class="st">"Arial"</span>, font_color<span class="op">=</span><span class="st">"white"</span>),</span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>    <span class="co"># height=500,  # Adjust height for 2x2 layout</span></span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a>    <span class="co"># width=700,   # Adjust width for better spacing</span></span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>    showlegend<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>    font<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">14</span>),</span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>fig.update_yaxes(title_text<span class="op">=</span><span class="st">""</span>, showticklabels<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>fig.update_xaxes(tickvals<span class="op">=</span>[<span class="dv">98</span>, <span class="dv">99</span>, <span class="dv">100</span>, <span class="dv">101</span>, <span class="dv">102</span>])</span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-treament-effects" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-treament-effects-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>                            <div id="a4c3c7e7-2f2e-4aab-9596-6fa6bc34b044" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("a4c3c7e7-2f2e-4aab-9596-6fa6bc34b044")) {                    Plotly.newPlot(                        "a4c3c7e7-2f2e-4aab-9596-6fa6bc34b044",                        [{"customdata":[0.9999999999999998,0.9999999999999998,0.9999999999999997,0.9999999999999997,0.9999999999999997,0.9999999999999996,0.9999999999999994,0.9999999999999994,0.9999999999999993,0.9999999999999992,0.9999999999999991,0.9999999999999989,0.9999999999999988,0.9999999999999986,0.9999999999999983,0.9999999999999981,0.9999999999999978,0.9999999999999974,0.999999999999997,0.9999999999999966,0.999999999999996,0.9999999999999954,0.9999999999999947,0.9999999999999939,0.999999999999993,0.9999999999999919,0.9999999999999907,0.9999999999999892,0.9999999999999876,0.9999999999999857,0.9999999999999836,0.999999999999981,0.9999999999999781,0.9999999999999749,0.9999999999999711,0.9999999999999668,0.9999999999999619,0.9999999999999563,0.9999999999999497,0.9999999999999423,0.9999999999999338,0.9999999999999241,0.999999999999913,0.9999999999999002,0.9999999999998856,0.999999999999869,0.9999999999998499,0.9999999999998282,0.9999999999998034,0.9999999999997751,0.9999999999997428,0.9999999999997059,0.9999999999996638,0.9999999999996159,0.9999999999995612,0.999999999999499,0.9999999999994281,0.9999999999993474,0.9999999999992555,0.999999999999151,0.9999999999990322,0.999999999998897,0.9999999999987434,0.9999999999985689,0.9999999999983707,0.9999999999981457,0.9999999999978902,0.9999999999976004,0.9999999999972715,0.9999999999968987,0.999999999996476,0.9999999999959971,0.9999999999954545,0.99999999999484,0.9999999999941445,0.9999999999933573,0.9999999999924668,0.9999999999914597,0.9999999999903212,0.9999999999890343,0.9999999999875805,0.9999999999859385,0.9999999999840845,0.9999999999819921,0.9999999999796311,0.9999999999769681,0.9999999999739654,0.9999999999705809,0.9999999999667671,0.9999999999624714,0.999999999957634,0.9999999999521886,0.9999999999460609,0.9999999999391678,0.999999999931416,0.9999999999227016,0.9999999999129082,0.9999999999019061,0.9999999998895499,0.9999999998756779,0.999999999860109,0.9999999998426418,0.9999999998230509,0.9999999998010858,0.9999999997764667,0.9999999997488823,0.9999999997179856,0.9999999996833905,0.9999999996446669,0.9999999996013368,0.9999999995528682,0.9999999994986698,0.9999999994380844,0.9999999993703819,0.9999999992947511,0.999999999210292,0.9999999991160053,0.9999999990107826,0.9999999988933943,0.9999999987624775,0.9999999986165216,0.999999998453853,0.9999999982726185,0.9999999980707662,0.9999999978460252,0.9999999975958833,0.9999999973175624,0.9999999970079907,0.9999999966637739,0.9999999962811621,0.999999995856014,0.9999999953837576,0.9999999948593478,0.9999999942772184,0.9999999936312315,0.9999999929146203,0.9999999921199282,0.9999999912389405,0.9999999902626111,0.9999999891809819,0.9999999879830942,0.9999999866568933,0.9999999851891228,0.9999999835652108,0.9999999817691442,0.999999979783333,0.9999999775884617,0.9999999751633278,0.9999999724846657,0.9999999695269545,0.9999999662622104,0.9999999626597594,0.9999999586859905,0.999999954304088,0.9999999494737405,0.9999999441508244,0.9999999382870611,0.9999999318296444,0.9999999247208365,0.9999999168975308,0.9999999082907765,0.9999998988252651,0.9999998884187737,0.9999998769815625,0.999999864415722,0.9999998506144695,0.9999998354613852,0.9999998188295892,0.9999998005808516,0.9999997805646308,0.9999997586170374,0.999999734559714,0.9999997081986294,0.9999996793227767,0.9999996477027718,0.9999996130893433,0.9999995752117061,0.9999995337758124,0.9999994884624683,0.9999994389253098,0.9999993847886273,0.9999993256450267,0.9999992610529194,0.9999991905338261,0.9999991135694849,0.9999990295987474,0.9999989380142537,0.9999988381588654,0.9999987293218481,0.9999986107347802,0.9999984815671766,0.9999983409218045,0.9999981878296754,0.9999980212446914,0.9999978400379241,0.9999976429915056,0.999997428792105,0.9999971960239687,0.9999969431614967,0.9999966685613266,0.9999963704538992,0.9999960469344729,0.9999956959535568,0.9999953153067289,0.9999949026238049,0.9999944553573209,0.9999939707702932,0.9999934459232135,0.9999928776602415,0.9999922625945482,0.9999915970927675,0.9999908772585085,0.9999900989148801,0.9999892575859761,0.9999883484772705,0.9999873664548662,0.9999863060235421,0.9999851613035388,0.999983926006022,0.9999825934071632,0.9999811563207677,0.9999796070693886,0.9999779374538534,0.9999761387211326,0.999974201530478,0.9999721159177536,0.9999698712578816,0.9999674562253243,0.9999648587525186,0.9999620659861803,0.9999590642413916,0.9999558389533839,0.9999523746269271,0.9999486547832318,0.9999446619042742,0.9999403773744465,0.9999357814194376,0.9999308530422472,0.9999255699562329,0.9999199085150934,0.999913843639683,0.9999073487415607,0.9999003956431686,0.9998929544945391,0.9998849936864286,0.9998764797597747,0.999867377311377,0.9998576488956985,0.99984725492269,0.9998361535515364,0.9998243005802301,0.9998116493308755,0.9997981505306316,0.9997837521882037,0.999768399465796,0.9997520345464435,0.9997345964966428,0.9997160211242062,0.9996962408312717,0.9996751844624003,0.9996527771477067,0.9996289401409657,0.9996035906526545,0.9995766416778886,0.999548001819224,0.9995175751043041,0.9994852607983385,0.999450953211415,0.9994145415006476,0.9993759094671872,0.9993349353481225,0.9992914916033127,0.9992454446972173,0.999196654875784,0.9991449759384875,0.9990902550056157,0.9990323322809196,0.9989710408097617,0.9989062062329087,0.9988376465361386,0.9987651717958478,0.9986885839208584,0.9986076763906561,0.9985222339902966,0.9984320325422502,0.9983368386354656,0.9982364093519654,0.9981304919913003,0.9980188237932135,0.997901131658895,0.9977771318712194,0.9976465298143935,0.9975090196934614,0.9973642842541312,0.9972119945034289,0.9970518094316883,0.9968833757364322,0.9967063275487025,0.9965202861624427,0.9963248597675461,0.9961196431872067,0.9959042176202506,0.9956781503891222,0.9954409946942484,0.9951922893755136,0.99493155868159,0.994658312047921,0.9943720438841307,0.994072233371702,0.9937583442727304,0.9934298247506291,0.9930861072036437,0.992726608112048,0.9923507278999438,0.9919578508125371,0.9915473448098389,0.9911185614777028,0.9906708359571192,0.9902034868927354,0.9897158164014982,0.9892071100624046,0.9886766369282527,0.988123649560363,0.987547384087184,0.9869470602876819,0.9863218817004646,0.9856710357594792,0.9849936939572025,0.984289012036166,0.983556130209624,0.9827941734122259,0.9820022515814094,0.9811794599703157,0.9803248794929201,0.9794375771020273,0.9785166062008328,0.9775610070885591,0.9765698074408007,0.9755420228249855,0.9744766572514676,0.9733727037606126,0.9722291450461656,0.9710449541152564,0.9698190949851375,0.9685505234168786,0.9672381876860487,0.9658810293903336,0.964477984294108,0.9630279832096714,0.9615299529150435,0.9599828171078577,0.9583854973950581,0.9567369143178625,0.955035988411357,0.9532816412981785,0.9514727968153692,0.9496083821736815,0.9476873291483369,0.9457085753001406,0.9436710652259677,0.9415737518372077,0.9394155976650489,0.9371955761909907,0.9349126732012423,0.9325658881633468,0.9301542356232714,0.9276767466213637,0.9251324701250941,0.9225204744768156,0.9198398488544385,0.917089704742819,0.9142691774138758,0.9113774274129078,0.9084136420490468,0.9053770368871673,0.9022668572390045,0.8990823796508618,0.8958229133852231,0.8924878018938769,0.8890764242795717,0.8855881967437319,0.882022574017381,0.8783790507723679,0.8746571630103653,0.870856489426468,0.8669766527449132,0.8630173210237253,0.8589782089257347,0.8548590789530284,0.8506597426418807,0.846380061715697,0.8420199491928138,0.8375793704467573,0.8330583442161503,0.8284569435614908,0.8237752967665792,0.8190135881816485,0.8141720590062178,0.8092510080088633,0.8042507921820006,0.7991718273293581,0.7940145885839021,0.7887796108546337,0.7834674891999247,0.7780788791260453,0.7726144968091162,0.7670751192388202,0.7614615842829477,0.7557747906710545,0.7500156978965922,0.7441853260364297,0.7382847554868182,0.7323151266156467,0.7262776393299832,0.7201735525592086,0.7140041836530553,0.7077709076950739,0.701475156731572,0.6951184189162238,0.6887022375714115,0.6822282101664552,0.6756979872141419,0.669113271086448,0.662475814750514,0.6557874204268127,0.6490499381704765,0.6422652643782135,0.6354353402220969,0.6285621500128397,0.6216477194945966,0.6146941140734725,0.6077034369828215,0.6006778273873798,0.5936194584295966,0.5865305352209048,0.579413292780792,0.5722699939274211,0.5651029271224276,0.5579144042740183,0.5507067585011927,0.5434823418632448,0.5362435230580043,0.5289926850923443,0.5217322229293344,0.5144645411152367,0.5071920513908232,0.49991717029074845,0.4926423167347269,0.48536990961508886,0.4781023653840174,0.4708420956452042,0.4635915047532223,0.4563529874251627,0.4491289263682635,0.4419216899272218,0.4347336297556228,0.4275670785146264,0.4204243476032249,0.4133077249235252,0.40621947268443226,0.399161825247799,0.39213698701979016,0.38514713039132187,0.37819439373055164,0.37128087943028043,0.36440865201376493,0.3575797363010893,0.3507961156394721,0.34405973019938674,0.3373724753394248,0.3307362000419287,0.3241527054212767,0.31762374330726484,0.31115101490470765,0.3047361695315145,0.2983808034360358,0.29208645869544747,0.2858546221960535,0.2796867246962286,0.2735841399732296,0.2675481840538614,0.26158011452987406,0.25568112995811976,0.24985236934533794,0.24409491171791697,0.2384097757757947,0.23279791963051055,0.22726024062661399,0.22179757524549326,0.2164106990911403,0.2111003269562456,0.20586711296795612,0.20071165081141973,0.19563447403004264,0.19063605640066983,0.1857168123817925,0.1808770976333085,0.17611720960539723,0.17143738819481324,0.16683781646625961,0.1623186214364276,0.15787987491870692,0.15352159442567936,0.14924374412734265,0.14504623586205345,0.14092893019790598,0.13689163754171507,0.13293411929275767,0.12905608903882282,0.12525721379139965,0.12153711525749977,0.11789537114515314,0.11433151649962658,0.11084504506780879,0.10743541068757134,0.10410202869963814,0.1008442773788113,0.0976614993820415,0.09455300321047044,0.09151806468263368,0.08855592841638282,0.08566580931660472,0.08284689406638934,0.08009834261901849,0.07741928968822331,0.07480884623452078,0.07226610094502495,0.06979012170473675,0.06737995705686695,0.06503463765028039,0.06275317767194866,0.06053457626239056,0.058377818912420554,0.056281878839215205,0.054245718340188764,0.0522682901230096,0.05034853861019528,0.048485401217032376,0.046677809601317954,0.04492469088385442,0.04322496883850013,0.041577565050694654,0.03998140004364348,0.03843539437115295,0.036938469676516594,0.03548954971663176,0.03408756135088975,0.032731435494293915,0.03142010803436224,0.030152520711596797,0.02892762196315546,0.027744367729669484,0.026601722225080615,0.02549865866945855,0.02443415998495302,0.02340721945490809,0.022416841346449945,0.021462041496716044,0.020541847863134066,0.019655301038106088,0.018801454728516576,0.01797937620062906,0.017188146690837125,0.01642686178293018,0.01569463175248198,0.014990581879017473,0.014313852726730358,0.013663600394430486,0.01303899673556963,0.012439229549091158,0.011863502741986665,0.011311036464395685,0.010781067218107898,0.010272847939403418,0.00978564805708737,0.009318753526679657,0.008871466841667952,0.008443107022745866,0.00803300958600961,0.007640526491008326,0.0072650260696311975,0.00690589293672772,0.006562527883424485,0.0062343477540498515,0.005920785307575005,0.005621289064503987,0.005335323140076453,0.005062367064692097,0.0048019155924108325,0.004553478498375729,0.004316580366011569,0.00409076036479028,0.0038755720193826004,0.0036705829709611226,0.0034753747314061334,0.003289542431163306,0.0031126945614452506,0.00294445271148569,0.0027844513014915195,0.002632337311949118,0.0024877700098967503,0.002350420672750486,0.002219972310263274,0.0020961193851487536,0.0019785675329012653,0.001867033281293895,0.0017612437700363914,0.0016609364710337138,0.0015658589096638753,0.0014757683874832006,0.0013904317067224836,0.0013096248969357571,0.0012331329441258587,0.0011607495226527709,0.0010922767302160574,0.0010275248261681913,0.0009663119734084624,0.0009084639840786224,0.0008538140692615492,0.0008022025928736687,0.0007534768299123362,0.0007074907292115018,0.0006641046808335549,0.000623185288217809,0.0005846051451815493,0.0005482426178599065,0.0005139816316566126,0.00048171146325914904,0.00045132653776558396,0.00042272623095196415,0.0003958146766996906,0.0003705005795937577,0.000346697032686083,0.0003243213404156009,0.0003032948466606955,0.0002835427678963276,0.00026499403141710953,0.00024758111857980936,0.00023123991301499114,0.00021590955374628518,0.00020153229315555965,0.00018805335972105208,0.00017542082545463078,0.00016358547796013756,0.00015250069702610336,0.00014212233566968102,0.00013240860553886957,0.00012331996658165867,0.00011481902088728013,0.00010687041060108982,9.944071981671243e-05,9.249838034242064e-05,8.601358124471492e-05,7.995818206363303e-05,7.430562959998e-05,6.903087817256015e-05,6.411031324138339e-05,5.9521678297147496e-05,5.524400491352388e-05,5.125754586443598e-05,4.754371120341272e-05,4.408500720920472e-05,4.0864978097743254e-05,3.78681504068501e-05,3.5079979956109675e-05,3.248680129186443e-05,3.0075779523075497e-05,2.783486446067407e-05,2.5752746971030582e-05,2.3818817458387542e-05,2.2023126391768066e-05,2.035634679531384e-05,1.8809738621117233e-05,1.737511492738708e-05,1.6044809786008862e-05,1.4811647846335596e-05,1.3668915483155963e-05,1.2610333460338907e-05,1.163003104198701e-05,1.0722521488037984e-05,9.882678868367023e-06,9.105716138546605e-06,8.387164415091242e-06,7.722853395675244e-06,7.1088928689233555e-06,6.5416552625929825e-06,6.017759176746296e-06,5.534053856615095e-06,5.087604556086589e-06,4.6756787485113804e-06,4.295733140091684e-06,3.945401446436847e-06,3.6224828913189455e-06,3.324931390658037e-06,3.050845385210721e-06,2.7984582871010133e-06,2.5661295073309276e-06,2.352336033073499e-06,2.1556645237730265e-06,1.9748038981859395e-06,1.8085383842736391e-06,1.6557410061901479e-06,1.5153674841617004e-06,1.386450521612126e-06,1.268094460438185e-06,1.1594702792327993e-06,1.059810917802828e-06,9.684069062210199e-07,8.846022814257282e-07,8.077907742709556e-07,7.374122493741808e-07,6.729493839952028e-07,6.139245704028795e-07,5.598970277409521e-07,5.10460110958455e-07,4.652388038151045e-07,4.2388738452636687e-07,3.860872539451776e-07,3.51544914289903e-07,3.199900893147145e-07,2.911739780397937e-07,2.6486763116118084e-07,2.4086044381199656e-07,2.1895875534916343e-07,1.989845513916677e-07,1.8077425811835468e-07,1.6417762582765505e-07,1.4905669343256989e-07,1.3528482867286584e-07,1.2274584038074465e-07,1.113331558055819e-07,1.0094905955604361e-07,9.150398971868867e-08,8.291588737829869e-08,7.510959498802094e-08,6.801630036967765e-08,6.15730241237955e-08,5.572214556437416e-08,5.041096617919294e-08,4.559130561965219e-08,4.1219131108327645e-08,3.725421404698892e-08,3.3659815046327424e-08,3.0402392825479296e-08,2.7451337314410296e-08,2.4778722962359723e-08,2.2359082918477213e-08,2.016920042091641e-08,1.8187917838474732e-08,1.639596058922166e-08,1.4775776380204775e-08,1.3311386437564465e-08,1.198824994830261e-08,1.0793139271214613e-08,9.714025694940176e-09,8.739974410865159e-09,7.86104903394147e-09,7.0682232289343006e-09,6.353300441297449e-09,5.7088404004090876e-09,5.128091284944958e-09,4.60492877163432e-09,4.133799413885697e-09,3.709668905393926e-09,3.327975894862334e-09,2.9845883542378715e-09,2.6757647209052493e-09,2.3981183705501508e-09,2.148584754557703e-09,1.9243919791023245e-09,1.723033493661319e-09,1.5422437771306363e-09,1.3799758002974727e-09,1.23438026466971e-09,1.1037877278852193e-09,9.86691062188072e-10,8.817304664177072e-10,7.876794771988216e-10,7.034320903542834e-10,6.279916586748868e-10,5.60459789689105e-10,5.000276859234987e-10,4.459667080070062e-10,3.9762149128819146e-10,3.5440195222946613e-10,3.157776262696643e-10,2.812712285304997e-10,2.5045410190216444e-10,2.2294099899511366e-10,1.9838564124796676e-10,1.7647761030303855e-10,1.5693779609193825e-10,1.395161763895203e-10,1.2398804205560054e-10,1.1015244272272184e-10,9.782885612708014e-11,8.685585584089495e-11,7.708844673715021e-11,6.839717681117463e-11,6.066602775689489e-11,5.3791304743811e-11,4.768008210476182e-11,4.224942617980787e-11,3.7425063048601714e-11,3.31408234188757e-11,2.9337421381114837e-11,2.5962121341649436e-11,2.2967627799630463e-11,2.031197432472709e-11,1.7957413334102057e-11,1.5870749159319075e-11,1.4021894756410802e-11,1.2384426817391159e-11,1.0934586569533167e-11,9.651390797671411e-12,8.515965710387263e-12,7.511657962311347e-12,6.623590564913684e-12,5.838662886503698e-12,5.145106563020363e-12,4.532374475729739e-12,3.9913627958299e-12,3.513744850636158e-12,3.0923041904884485e-12,2.7204904995414836e-12,2.392641640369675e-12,2.1036505870597466e-12,1.848854402908273e-12,1.624478329631529e-12,1.4268586312482512e-12,1.2527756609870266e-12,1.0996759058912176e-12,9.648948307017235e-13,8.464340339742193e-13,7.422951142643797e-13,6.507017147328042e-13,5.702105454474804e-13,4.994893387788579e-13,4.374278717023117e-13,3.83026943495679e-13,3.3517633113433476e-13,2.9320990080350384e-13,2.5646151868841116e-13,2.2426505097428162e-13,1.9595436384634013e-13,1.7130741269966165e-13,1.4954704141700859e-13,1.3067324999838092e-13,1.1401990462900358e-13,9.947598300641403e-14,8.681944052568724e-14,7.571721027943568e-14,6.59472476627343e-14,5.750955267558311e-14,5.007105841059456e-14,4.363176486776865e-14,3.7969627442180354e-14,3.3084646133829665e-14,2.8754776337791554e-14,2.4980018054066022e-14,2.1760371282653068e-14,1.887379141862766e-14,1.6431300764452317e-14,1.432187701766452e-14,1.2434497875801753e-14,1.0769163338864018e-14,9.325873406851315e-15,8.104628079763643e-15,6.994405055138486e-15,6.106226635438361e-15,5.329070518200751e-15,4.551914400963142e-15,3.9968028886505635e-15,3.4416913763379853e-15,2.9976021664879227e-15,2.55351295663786e-15,2.220446049250313e-15,1.887379141862766e-15,1.6653345369377348e-15,1.4432899320127035e-15,1.2212453270876722e-15,1.1102230246251565e-15,8.881784197001252e-16,7.771561172376096e-16,6.661338147750939e-16,5.551115123125783e-16,5.551115123125783e-16,4.440892098500626e-16,3.3306690738754696e-16,3.3306690738754696e-16,3.3306690738754696e-16,2.220446049250313e-16,2.220446049250313e-16,2.220446049250313e-16,1.1102230246251565e-16,1.1102230246251565e-16,1.1102230246251565e-16,1.1102230246251565e-16,1.1102230246251565e-16,1.1102230246251565e-16,1.1102230246251565e-16,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],"fill":"tozeroy","hoverlabel":{"font":{"family":"Arial","size":18}},"hovertemplate":"Pr(Treatment Effect > %{x:.2f}) = %{customdata:.2%}<extra></extra>","mode":"lines","name":"Scale: 0.25","x":[97.96669338575838,97.97125248557914,97.97581158539992,97.98037068522069,97.98492978504147,97.98948888486224,97.99404798468301,97.99860708450379,98.00316618432456,98.00772528414534,98.0122843839661,98.01684348378689,98.02140258360765,98.02596168342842,98.0305207832492,98.03507988306997,98.03963898289075,98.04419808271152,98.04875718253228,98.05331628235307,98.05787538217383,98.06243448199461,98.06699358181538,98.07155268163616,98.07611178145693,98.0806708812777,98.08522998109848,98.08978908091925,98.09434818074003,98.0989072805608,98.10346638038156,98.10802548020234,98.11258458002311,98.11714367984389,98.12170277966466,98.12626187948544,98.13082097930621,98.13538007912697,98.13993917894776,98.14449827876852,98.1490573785893,98.15361647841007,98.15817557823084,98.16273467805162,98.16729377787239,98.17185287769317,98.17641197751394,98.18097107733472,98.18553017715548,98.19008927697625,98.19464837679703,98.1992074766178,98.20376657643858,98.20832567625935,98.21288477608012,98.2174438759009,98.22200297572167,98.22656207554245,98.23112117536321,98.235680275184,98.24023937500476,98.24479847482553,98.24935757464631,98.25391667446708,98.25847577428786,98.26303487410863,98.2675939739294,98.27215307375018,98.27671217357094,98.28127127339172,98.28583037321249,98.29038947303326,98.29494857285404,98.2995076726748,98.30406677249559,98.30862587231636,98.31318497213714,98.3177440719579,98.32230317177867,98.32686227159945,98.33142137142022,98.335980471241,98.34053957106177,98.34509867088254,98.34965777070332,98.35421687052408,98.35877597034487,98.36333507016563,98.36789416998641,98.37245326980718,98.37701236962795,98.38157146944873,98.3861305692695,98.39068966909028,98.39524876891105,98.39980786873181,98.4043669685526,98.40892606837336,98.41348516819414,98.41804426801491,98.42260336783569,98.42716246765646,98.43172156747723,98.436280667298,98.44083976711877,98.44539886693956,98.44995796676032,98.45451706658109,98.45907616640187,98.46363526622264,98.46819436604342,98.47275346586419,98.47731256568497,98.48187166550574,98.4864307653265,98.49098986514728,98.49554896496805,98.50010806478883,98.5046671646096,98.50922626443037,98.51378536425115,98.51834446407192,98.5229035638927,98.52746266371346,98.53202176353425,98.53658086335501,98.54113996317578,98.54569906299656,98.55025816281733,98.55481726263811,98.55937636245888,98.56393546227964,98.56849456210043,98.5730536619212,98.57761276174197,98.58217186156274,98.58673096138351,98.59129006120429,98.59584916102506,98.60040826084584,98.6049673606666,98.60952646048739,98.61408556030815,98.61864466012892,98.6232037599497,98.62776285977047,98.63232195959125,98.63688105941202,98.64144015923279,98.64599925905357,98.65055835887433,98.65511745869512,98.65967655851588,98.66423565833666,98.66879475815743,98.6733538579782,98.67791295779898,98.68247205761975,98.68703115744053,98.6915902572613,98.69614935708206,98.70070845690285,98.70526755672361,98.7098266565444,98.71438575636516,98.71894485618594,98.72350395600671,98.72806305582748,98.73262215564826,98.73718125546903,98.7417403552898,98.74629945511057,98.75085855493134,98.75541765475212,98.75997675457289,98.76453585439367,98.76909495421444,98.77365405403522,98.77821315385599,98.78277225367675,98.78733135349754,98.7918904533183,98.79644955313908,98.80100865295985,98.80556775278062,98.8101268526014,98.81468595242217,98.81924505224295,98.82380415206372,98.8283632518845,98.83292235170526,98.83748145152603,98.84204055134681,98.84659965116758,98.85115875098836,98.85571785080913,98.8602769506299,98.86483605045068,98.86939515027144,98.87395425009223,98.87851334991299,98.88307244973376,98.88763154955454,98.89219064937531,98.89674974919609,98.90130884901686,98.90586794883764,98.9104270486584,98.91498614847917,98.91954524829995,98.92410434812072,98.9286634479415,98.93322254776227,98.93778164758304,98.94234074740382,98.94689984722459,98.95145894704537,98.95601804686613,98.96057714668692,98.96513624650768,98.96969534632845,98.97425444614923,98.97881354597,98.98337264579078,98.98793174561155,98.99249084543231,98.9970499452531,99.00160904507386,99.00616814489464,99.01072724471541,99.0152863445362,99.01984544435696,99.02440454417773,99.02896364399851,99.03352274381928,99.03808184364006,99.04264094346082,99.04720004328159,99.05175914310237,99.05631824292314,99.06087734274392,99.06543644256469,99.06999554238547,99.07455464220624,99.079113742027,99.08367284184779,99.08823194166855,99.09279104148933,99.0973501413101,99.10190924113087,99.10646834095165,99.11102744077242,99.1155865405932,99.12014564041397,99.12470474023475,99.12926384005551,99.13382293987628,99.13838203969706,99.14294113951783,99.14750023933861,99.15205933915938,99.15661843898015,99.16117753880093,99.1657366386217,99.17029573844248,99.17485483826324,99.17941393808402,99.18397303790479,99.18853213772556,99.19309123754634,99.19765033736711,99.20220943718789,99.20676853700866,99.21132763682942,99.2158867366502,99.22044583647097,99.22500493629175,99.22956403611252,99.23412313593329,99.23868223575407,99.24324133557484,99.24780043539562,99.25235953521639,99.25691863503717,99.26147773485793,99.2660368346787,99.27059593449948,99.27515503432025,99.27971413414103,99.2842732339618,99.28883233378257,99.29339143360335,99.29795053342411,99.3025096332449,99.30706873306566,99.31162783288644,99.31618693270721,99.32074603252798,99.32530513234876,99.32986423216953,99.33442333199031,99.33898243181108,99.34354153163184,99.34810063145262,99.35265973127339,99.35721883109417,99.36177793091494,99.36633703073572,99.37089613055649,99.37545523037726,99.38001433019804,99.3845734300188,99.38913252983959,99.39369162966035,99.39825072948112,99.4028098293019,99.40736892912267,99.41192802894345,99.41648712876422,99.421046228585,99.42560532840577,99.43016442822653,99.43472352804731,99.43928262786808,99.44384172768886,99.44840082750963,99.4529599273304,99.45751902715118,99.46207812697195,99.46663722679273,99.4711963266135,99.47575542643426,99.48031452625504,99.48487362607581,99.48943272589659,99.49399182571736,99.49855092553814,99.50311002535891,99.50766912517967,99.51222822500046,99.51678732482122,99.521346424642,99.52590552446277,99.53046462428354,99.53502372410432,99.53958282392509,99.54414192374587,99.54870102356664,99.55326012338742,99.55781922320818,99.56237832302895,99.56693742284973,99.5714965226705,99.57605562249128,99.58061472231205,99.58517382213282,99.5897329219536,99.59429202177436,99.59885112159515,99.60341022141591,99.6079693212367,99.61252842105746,99.61708752087823,99.62164662069901,99.62620572051978,99.63076482034056,99.63532392016133,99.6398830199821,99.64444211980287,99.64900121962364,99.65356031944442,99.65811941926519,99.66267851908597,99.66723761890674,99.6717967187275,99.67635581854829,99.68091491836906,99.68547401818984,99.6900331180106,99.69459221783137,99.69915131765215,99.70371041747292,99.7082695172937,99.71282861711447,99.71738771693525,99.72194681675602,99.72650591657678,99.73106501639757,99.73562411621833,99.74018321603911,99.74474231585988,99.74930141568065,99.75386051550143,99.7584196153222,99.76297871514298,99.76753781496375,99.77209691478453,99.7766560146053,99.78121511442606,99.78577421424684,99.79033331406761,99.79489241388839,99.79945151370916,99.80401061352993,99.8085697133507,99.81312881317147,99.81768791299226,99.82224701281302,99.82680611263379,99.83136521245457,99.83592431227534,99.84048341209612,99.84504251191689,99.84960161173767,99.85416071155844,99.8587198113792,99.86327891119998,99.86783801102075,99.87239711084153,99.8769562106623,99.88151531048307,99.88607441030385,99.89063351012462,99.8951926099454,99.89975170976616,99.90431080958695,99.90886990940771,99.91342900922848,99.91798810904926,99.92254720887003,99.92710630869081,99.93166540851158,99.93622450833234,99.94078360815313,99.9453427079739,99.94990180779467,99.95446090761544,99.95902000743622,99.96357910725699,99.96813820707776,99.97269730689854,99.9772564067193,99.98181550654009,99.98637460636085,99.99093370618162,99.9954928060024,100.00005190582317,100.00461100564395,100.00917010546472,100.0137292052855,100.01828830510627,100.02284740492703,100.02740650474782,100.03196560456858,100.03652470438936,100.04108380421013,100.0456429040309,100.05020200385168,100.05476110367245,100.05932020349323,100.063879303314,100.06843840313476,100.07299750295554,100.07755660277631,100.0821157025971,100.08667480241786,100.09123390223864,100.09579300205941,100.10035210188018,100.10491120170096,100.10947030152172,100.1140294013425,100.11858850116327,100.12314760098405,100.12770670080482,100.13226580062559,100.13682490044637,100.14138400026714,100.14594310008792,100.15050219990869,100.15506129972945,100.15962039955023,100.164179499371,100.16873859919178,100.17329769901255,100.17785679883332,100.1824158986541,100.18697499847487,100.19153409829565,100.19609319811642,100.2006522979372,100.20521139775796,100.20977049757873,100.21432959739951,100.21888869722028,100.22344779704106,100.22800689686183,100.2325659966826,100.23712509650338,100.24168419632414,100.24624329614493,100.25080239596569,100.25536149578647,100.25992059560724,100.26447969542801,100.26903879524879,100.27359789506956,100.27815699489034,100.2827160947111,100.28727519453187,100.29183429435265,100.29639339417342,100.3009524939942,100.30551159381497,100.31007069363575,100.31462979345652,100.31918889327729,100.32374799309807,100.32830709291883,100.33286619273962,100.33742529256038,100.34198439238115,100.34654349220193,100.3511025920227,100.35566169184348,100.36022079166425,100.36477989148503,100.3693389913058,100.37389809112656,100.37845719094734,100.38301629076811,100.38757539058889,100.39213449040966,100.39669359023043,100.40125269005121,100.40581178987198,100.41037088969276,100.41492998951352,100.41948908933429,100.42404818915507,100.42860728897584,100.43316638879662,100.43772548861739,100.44228458843817,100.44684368825894,100.4514027880797,100.45596188790049,100.46052098772125,100.46508008754203,100.4696391873628,100.47419828718357,100.47875738700435,100.48331648682512,100.4878755866459,100.49243468646667,100.49699378628745,100.50155288610821,100.50611198592898,100.51067108574976,100.51523018557053,100.51978928539131,100.52434838521208,100.52890748503285,100.53346658485363,100.5380256846744,100.54258478449518,100.54714388431594,100.55170298413672,100.55626208395749,100.56082118377826,100.56538028359904,100.56993938341981,100.57449848324059,100.57905758306136,100.58361668288212,100.5881757827029,100.59273488252367,100.59729398234445,100.60185308216522,100.606412181986,100.61097128180677,100.61553038162754,100.62008948144832,100.62464858126908,100.62920768108987,100.63376678091063,100.6383258807314,100.64288498055218,100.64744408037295,100.65200318019373,100.6565622800145,100.66112137983527,100.66568047965605,100.67023957947681,100.6747986792976,100.67935777911836,100.68391687893914,100.68847597875991,100.69303507858068,100.69759417840146,100.70215327822223,100.70671237804301,100.71127147786378,100.71583057768456,100.72038967750532,100.72494877732609,100.72950787714687,100.73406697696764,100.73862607678842,100.74318517660919,100.74774427642996,100.75230337625074,100.7568624760715,100.76142157589229,100.76598067571305,100.77053977553382,100.7750988753546,100.77965797517537,100.78421707499615,100.78877617481692,100.7933352746377,100.79789437445847,100.80245347427923,100.80701257410001,100.81157167392078,100.81613077374156,100.82068987356233,100.8252489733831,100.82980807320388,100.83436717302465,100.83892627284543,100.8434853726662,100.84804447248698,100.85260357230774,100.85716267212851,100.86172177194929,100.86628087177006,100.87083997159084,100.87539907141161,100.87995817123237,100.88451727105316,100.88907637087392,100.8936354706947,100.89819457051547,100.90275367033625,100.90731277015702,100.91187186997779,100.91643096979857,100.92099006961934,100.92554916944012,100.93010826926088,100.93466736908165,100.93922646890243,100.9437855687232,100.94834466854398,100.95290376836475,100.95746286818553,100.9620219680063,100.96658106782706,100.97114016764785,100.97569926746861,100.9802583672894,100.98481746711016,100.98937656693093,100.99393566675171,100.99849476657248,101.00305386639326,101.00761296621403,101.0121720660348,101.01673116585557,101.02129026567634,101.02584936549712,101.03040846531789,101.03496756513867,101.03952666495944,101.0440857647802,101.04864486460099,101.05320396442175,101.05776306424254,101.0623221640633,101.06688126388407,101.07144036370485,101.07599946352562,101.0805585633464,101.08511766316717,101.08967676298795,101.09423586280872,101.09879496262948,101.10335406245026,101.10791316227103,101.11247226209181,101.11703136191258,101.12159046173335,101.12614956155413,101.1307086613749,101.13526776119568,101.13982686101645,101.14438596083723,101.148945060658,101.15350416047876,101.15806326029954,101.16262236012031,101.16718145994109,101.17174055976186,101.17629965958263,101.1808587594034,101.18541785922417,101.18997695904496,101.19453605886572,101.1990951586865,101.20365425850727,101.20821335832804,101.21277245814882,101.21733155796959,101.22189065779037,101.22644975761114,101.2310088574319,101.23556795725268,101.24012705707345,101.24468615689423,101.249245256715,101.25380435653577,101.25836345635655,101.26292255617732,101.2674816559981,101.27204075581886,101.27659985563965,101.28115895546041,101.28571805528118,101.29027715510196,101.29483625492273,101.29939535474351,101.30395445456428,101.30851355438506,101.31307265420583,101.31763175402659,101.32219085384737,101.32674995366814,101.33130905348892,101.33586815330969,101.34042725313046,101.34498635295124,101.349545452772,101.35410455259279,101.35866365241355,101.36322275223432,101.3677818520551,101.37234095187587,101.37690005169665,101.38145915151742,101.3860182513382,101.39057735115897,101.39513645097973,101.39969555080052,101.40425465062128,101.40881375044206,101.41337285026283,101.4179319500836,101.42249104990438,101.42705014972515,101.43160924954593,101.4361683493667,101.44072744918748,101.44528654900824,101.44984564882901,101.4544047486498,101.45896384847056,101.46352294829134,101.46808204811211,101.47264114793288,101.47720024775366,101.48175934757442,101.4863184473952,101.49087754721597,101.49543664703675,101.49999574685752,101.50455484667829,101.50911394649907,101.51367304631984,101.51823214614062,101.52279124596139,101.52735034578215,101.53190944560293,101.5364685454237,101.54102764524448,101.54558674506525,101.55014584488603,101.5547049447068,101.55926404452757,101.56382314434835,101.56838224416911,101.5729413439899,101.57750044381066,101.58205954363143,101.58661864345221,101.59117774327298,101.59573684309376,101.60029594291453,101.6048550427353,101.60941414255608,101.61397324237684,101.61853234219762,101.62309144201839,101.62765054183917,101.63220964165994,101.63676874148071,101.64132784130149,101.64588694112226,101.65044604094304,101.6550051407638,101.65956424058457,101.66412334040535,101.66868244022612,101.6732415400469,101.67780063986767,101.68235973968845,101.68691883950922,101.69147793932999,101.69603703915077,101.70059613897153,101.70515523879232,101.70971433861308,101.71427343843385,101.71883253825463,101.7233916380754,101.72795073789618,101.73250983771695,101.73706893753773,101.7416280373585,101.74618713717926,101.75074623700004,101.75530533682081,101.75986443664159,101.76442353646236,101.76898263628313,101.77354173610391,101.77810083592468,101.78265993574546,101.78721903556622,101.791778135387,101.79633723520777,101.80089633502854,101.80545543484932,101.81001453467009,101.81457363449087,101.81913273431164,101.8236918341324,101.82825093395319,101.83281003377395,101.83736913359473,101.8419282334155,101.84648733323627,101.85104643305705,101.85560553287782,101.8601646326986,101.86472373251937,101.86928283234015,101.87384193216091,101.87840103198168,101.88296013180246,101.88751923162323,101.89207833144401,101.89663743126478,101.90119653108556,101.90575563090633,101.9103147307271,101.91487383054788,101.91943293036864,101.92399203018942,101.92855113001019,101.93311022983096,101.93766932965174,101.94222842947251,101.94678752929329,101.95134662911406,101.95590572893482,101.9604648287556,101.96502392857637,101.96958302839715,101.97414212821792,101.9787012280387,101.98326032785947,101.98781942768024,101.99237852750102,101.99693762732178,102.00149672714257,102.00605582696333,102.0106149267841,102.01517402660488,102.01973312642565,102.02429222624643,102.0288513260672,102.03341042588798,102.03796952570875,102.04252862552951,102.0470877253503,102.05164682517106,102.05620592499184,102.06076502481261,102.06532412463338,102.06988322445416,102.07444232427493,102.07900142409571,102.08356052391647,102.08811962373724,102.09267872355802,102.09723782337879,102.10179692319957,102.10635602302034,102.11091512284112,102.11547422266189,102.12003332248266,102.12459242230344,102.1291515221242,102.13371062194499,102.13826972176575,102.14282882158653,102.1473879214073,102.15194702122807,102.15650612104885,102.16106522086962,102.1656243206904,102.17018342051117,102.17474252033193,102.17930162015271,102.18386071997348,102.18841981979426,102.19297891961503,102.1975380194358,102.20209711925658,102.20665621907735,102.21121531889813,102.2157744187189,102.22033351853968,102.22489261836044,102.22945171818121,102.23401081800199,102.23856991782276,102.24312901764354,102.2476881174643,102.25224721728509,102.25680631710586,102.26136541692662,102.2659245167474,102.27048361656817,102.27504271638895,102.27960181620972,102.28416091603049,102.28872001585127,102.29327911567204,102.29783821549282,102.30239731531358,102.30695641513435,102.31151551495513,102.3160746147759,102.32063371459668,102.32519281441745,102.32975191423823,102.334311014059,102.33887011387976,102.34342921370055,102.34798831352131,102.3525474133421,102.35710651316286,102.36166561298363,102.36622471280441,102.37078381262518,102.37534291244596,102.37990201226673,102.38446111208751,102.38902021190827,102.39357931172904,102.39813841154982,102.40269751137059,102.40725661119137,102.41181571101214,102.4163748108329,102.42093391065369,102.42549301047445,102.43005211029524,102.434611210116,102.43917030993677,102.44372940975755,102.44828850957832,102.4528476093991,102.45740670921987,102.46196580904065,102.46652490886142,102.47108400868218,102.47564310850296,102.48020220832373,102.48476130814451,102.48932040796528,102.49387950778606,102.49843860760683,102.5029977074276,102.50755680724838,102.51211590706914,102.51667500688993,102.5212341067107],"y":[0.0010657578986796787,0.001094594168700109,0.0011220824285038547,0.0011475320842164274,0.0011701557176441216,0.0011891243282996244,0.0012036300515609196,0.0012129509355564773,0.0012165120184099891,0.0012139371723593273,0.0012050869627173667,0.0011900790378173759,0.0011692891960761536,0.001143333100361742,0.0011130304352857852,0.0010793549340321203,0.0010433749620719131,0.0010061901013516856,0.0009688693545592951,0.0009323961775494635,0.0008976246110832374,0.0008652494441624687,0.0008357917687754915,0.0008095996706001547,0.0007868623300614767,0.0007676346437496431,0.00075186873091033,0.0007394484168327429,0.000730222973961838,0.0007240369834823197,0.0007207540409217534,0.0007202730288917891,0.0007225366737990195,0.0007275329628173847,0.0007352906274579868,0.0007458702497392457,0.0007593526132374763,0.0007758257455319959,0.0007953717564824919,0.0008180541639192009,0.0008439060131189616,0.0008729188235261563,0.0009050322923386207,0.0009401247692814877,0.000978004768839105,0.0010184041464816294,0.001060973946865375,0.0011052842337081295,0.0011508293358927556,0.0011970398168806632,0.0012433020564451168,0.0012889856344770474,0.0013334777863924865,0.001376223164717211,0.0014167661309372871,0.0014547919685991583,0.001490162896727405,0.0015229446835841195,0.0015534200751837989,0.00158208615796185,0.0016096341014726046,0.0016369113464955462,0.0016648680444034149,0.0016944912216833813,0.0017267315492709798,0.0017624285776890773,0.001802240740711535,0.001846586276562019,0.0018956004741356475,0.0019491133895431587,0.002006650512062011,0.0020674569401932575,0.002130543629318201,0.00219475236806434,0.002258834497096531,0.0023215371470298135,0.002381690056216768,0.0024382859099081272,0.00249054764890049,0.0025379773047347937,0.0025803825503936963,0.002617879175355452,0.0026508699184204483,0.0026800023028555587,0.0027061100843019503,0.002730144423681483,0.0027531017573931183,0.0027759554455137913,0.002799597612296692,0.0028247962234355297,0.002852170531778697,0.0028821857975563072,0.002915165920434652,0.0029513205814829012,0.0029907819222917955,0.0030336448599570663,0.0030800049387721996,0.0031299881479186463,0.00318376829824311,0.0032415691906229225,0.003303650719950587,0.0033702800228477088,0.00344169058448456,0.0035180336917032874,0.003599327622493867,0.0036854104140822603,0.003775901924891158,0.003870180221250692,0.003967376144537687,0.004066388353803814,0.004165919329228502,0.0042645309219105955,0.004360716216566305,0.004452982905320329,0.004539942206606221,0.004620396723834343,0.004693420596862227,0.004758425868475822,0.004815210116047119,0.004863981970955701,0.0049053629996514,0.004940366353125689,0.004970354401189669,0.004996979068265487,0.005022109635017749,0.00504775328208695,0.005075973615116215,0.005108811879372485,0.005148214660790777,0.005195970731137545,0.005253658497712323,0.005322604424587983,0.005403851935182674,0.005498139771162081,0.005605888600697597,0.005727194813225339,0.005861830831082773,0.006009251796554424,0.00616860902343245,0.0063387710047475955,0.006518352934939683,0.006705755567662485,0.006899213772949882,0.007096854419103613,0.00729676227603701,0.007497051647968686,0.0076959405444807375,0.007891823536844776,0.008083339141208902,0.008269427693364948,0.008449376241038321,0.008622847921807432,0.008789894500052244,0.008950952043794664,0.009106820952452396,0.009258632531794797,0.009407804925934725,0.009555991395523879,0.009705023691330476,0.009856852704522185,0.010013487832885276,0.010176935773803976,0.010349138927214804,0.010531913413541387,0.010726886960151711,0.01093543757074865,0.011158634853988388,0.011397186956797286,0.011651396979095553,0.011921133287174202,0.012205818081561255,0.012504437787618897,0.012815577319213184,0.013137478147233527,0.013468117639110518,0.01380530466723509,0.014146784396486811,0.014490343812785024,0.014833909216760989,0.015175627709964314,0.015513926603727626,0.01584754746431005,0.0161755548019507,0.016497322746110543,0.016812505926136853,0.01712100274797022,0.017422919999378755,0.017718547083998955,0.018008346240672962,0.01829296211338459,0.018573250426479598,0.018850321817214803,0.019125593629615894,0.019400840163129335,0.0196782308440872,0.019960346209850603,0.020250163421604184,0.020551006015194356,0.020866456369047978,0.021200233429283115,0.021556042076832475,0.021937403688645912,0.02234747957907757,0.022788899898152092,0.023263610163489327,0.023772746023354947,0.024316544333840565,0.024894295521188402,0.025504338873412222,0.026144099241168634,0.02681016095275676,0.027498372801026585,0.028203976868678177,0.028921753731638272,0.029646177115105886,0.030371572180983367,0.031092273049409612,0.03180277663365465,0.03249789115062317,0.03317287856743447,0.03382359064480326,0.03444659811456817,0.03503931193901537,0.03560009466733639,0.03612835879555312,0.03662464793219088,0.037090695646892026,0.03752945628262704,0.03794510186082133,0.03834297958450164,0.03872952539668502,0.03911213059782177,0.03949896065230849,0.03989872796461778,0.04032042347440718,0.04077301523795372,0.041265125493605656,0.041804700750923414,0.04239869185183225,0.04305276237357773,0.04377104386060601,0.04455595496032485,0.04540809851058878,0.04632624607691642,0.0473074136500566,0.04834702565565148,0.04943915770684093,0.05057684233377216,0.05175241693616194,0.05295789002034254,0.054185300822330855,0.05542704886908099,0.05667617379900807,0.05792657147892918,0.05917313949512508,0.060411852653382184,0.06163977629836898,0.06285503117409451,0.06405672745000561,0.06524488692184167,0.06642037107201615,0.06758482880662874,0.06874067178723743,0.06989107815254368,0.07104001807277041,0.07219228805415208,0.0733535361812639,0.07453025829611055,0.07572974588039813,0.07695997015018145,0.07822939321264714,0.07954670534195689,0.08092049652364418,0.08235887929228332,0.0838690874611372,0.08545708069019772,0.0871271872940806,0.08888181691976796,0.09072127074747265,0.09264367004065559,0.09464501483766721,0.0967193741859034,0.09885919854153033,0.10105573479539337,0.10329951577855577,0.10558088985793661,0.10789055294891614,0.11022004528696588,0.1125621786475257,0.11491136609467203,0.11726383517865538,0.11961771591550864,0.1219730058068628,0.12433142443863432,0.1266961787270052,0.12907166573896528,0.131463142594927,0.13387639207622118,0.13631740847597656,0.1387921216614516,0.14130616932245343,0.14386471923360972,0.14647233635042142,0.1491328847923489,0.1518494529836209,0.15462429166321148,0.1574587588199231,0.16035327201398156,0.16330727575197754,0.16631923811774887,0.1693866952734784,0.1725063635530418,0.1756743359827708,0.1788863731268915,0.18213828780611116,0.185426410737373,0.1887481112179792,0.19210233555377976,0.19549011783590456,0.1989150143378639,0.20238341501401272,0.20590469332881164,0.2094911681123647,0.21315786681161808,0.2169220964230973,0.22080284444472983,0.2248200454709423,0.22899375817258688,0.23334330165736597,0.2378863996836526,0.24263837668727625,0.2476114423735748,0.25281409322812637,0.25825065111321677,0.2639209521711912,0.2698201940148018,0.2759389455194147,0.2822633207938452,0.28877531615474344,0.29545330520260776,0.30227268170324917,0.30920663272813476,0.3162270158209315,0.3233053048631108,0.3304135612570312,0.33752538164236373,0.34461677204736363,0.3516669020773604,0.35865870164818936,0.3655792761875381,0.37242013263716045,0.37917722584356794,0.38585085057936824,0.3924454161551827,0.3989691465476043,0.4054337482261344,0.41185408051929207,0.41824785061534575,0.4246353392717328,0.4310391467337988,0.43748393411918207,0.4439961261683872,0.45060353859653124,0.4573348980413247,0.4642192343198671,0.4712851417847899,0.478559926537257,0.486068676172761,0.4938333056733959,0.5018716445543228,0.5101966347980724,0.5188157058987234,0.5277303830073667,0.536936168181353,0.546422715204014,0.5561742977491507,0.566170551097974,0.5763874510195034,0.5867984809827004,0.597375931018378,0.6080922680386502,0.6189215174788009,0.629840598702729,0.6408305606545501,0.6518776689242946,0.6629743003045018,0.674119606091664,0.6853199112969064,0.6965888243076485,0.7079470411676081,0.7194218410846217,0.731046285150304,0.7428581480511779,0.7548986315599597,0.7672109269838331,0.7798387092531617,0.7928246555939551,0.8062090846548748,0.8200288061431109,0.8343162560495523,0.849098969191371,0.8643994110529944,0.8802351577707906,0.8966193802465159,0.9135615596174042,0.931068340103385,0.9491444141456449,0.9677933350205535,0.9870181635484305,1.0068218764590362,1.027207491551774,1.0481778953483576,1.0697353885812666,1.0918809900137338,1.11461355697453,1.1379287900175366,1.1618181889993877,1.1862680196522326,1.2112583354865543,1.236762082405326,1.2627442958078308,1.2891613850840622,1.3159604905964821,1.3430788949705075,1.370443474293023,1.3979701851412654,1.4255635988558029,1.4531165130611148,1.48050968958694,1.5076117849838484,1.5342795521189603,1.5603583966488812,1.5856833688033385,1.6100806579484779,1.6333696348591782,1.6553654554933768,1.6758822023632929,1.6947364982574817,1.7117514856892626,1.726761028033361,1.7396139587449573,1.7501781867556525,1.758344461490499,1.7640296110264597,1.7671790912481884,1.7677687204211108,1.7658055190669573,1.7613276251298813,1.754403304541243,1.7451291230338684,1.7336273827984363,1.7200429548765235,1.7045396540160154,1.687296307407167,1.6685026637964961,1.6483552772399863,1.627053482845049,1.6047955628405237,1.5817751822910373,1.5581781562240051,1.534179594626205,1.50994145883228,1.4856105520404768,1.461316957549274,1.43717293038419,1.4132722409302856,1.389689962828104,1.3664826917044528,1.3436891762068714,1.3213313381695007,1.299415654167262,1.2779348656679912,1.2568699788078836,1.2361925068633068,1.2158668985023064,1.1958530830333842,1.1761090510420105,1.1565933765548628,1.1372675773552132,1.1180982057282163,1.0990585650357392,1.0801299598741836,1.0613024098561263,1.0425747886792636,1.0239543890525304,1.005455956805399,0.9871002797433588,0.968912453664164,0.9509199748145055,0.9331508212640012,0.9156316829908946,0.8983864816567474,0.881435287801534,0.8647936991217687,0.8484726935938306,0.8324789212257784,0.816815353942568,0.8014821795150643,0.7864778061737973,0.771799841365473,0.7574459207919926,0.743414290285018,0.7297040794842043,0.7163152479884785,0.7032482264827573,0.6905033124506791,0.678079908429195,0.665975707575982,0.6541859353620817,0.6427027477460978,0.6315148669216818,0.620607508407119,0.6099626212859087,0.5995594304689088,0.5893752393689856,0.5793864262690763,0.5695695500231323,0.5599024717439567,0.5503653990588984,0.5409417677767647,0.5316188911539652,0.5223883276510606,0.5132459421375748,0.5041916608603972,0.4952289451313461,0.4863640308023297,0.4776049986206488,0.46896075326931874,0.4604399954269179,0.45205027106578055,0.4437971754183286,0.43568377601592106,0.42771030085247685,0.4198741154045379,0.41216998769084506,0.40459061578308225,0.3971273692931003,0.3897711773795304,0.38251348246516015,0.37534717239146753,0.36826740480417725,0.36127224613209385,0.35436306288353053,0.3475446238366557,0.3408248962725256,0.33421454562937614,0.32772617366657075,0.32137335329999467,0.3151695368021184,0.3091269264811423,0.3032554021321464,0.2975615968727347,0.2920482023993369,0.28671356681222854,0.28155162418109236,0.27655216679065425,0.27170144087331993,0.26698301732270063,0.2623788632406953,0.2578705208975282,0.25344028999999096,0.24907230851066675,0.24475343706427227,0.2404738715622583,0.23622743593111714,0.23201153947116912,0.22782681720446138,0.22367650340490558,0.21956561452225834,0.21550003510826948,0.21148560724941465,0.2075273197855943,0.20362867894347,0.19979131884428275,0.19601488152235247,0.19229716505855107,0.18863450878860372,0.18502235959613877,0.18145594567734108,0.17793097553875523,0.17444428091475592,0.17099433218682958,0.16758157216660613,0.16420853641591832,0.16087975282341618,0.1576014370565235,0.15438102114105956,0.15122656772847864,0.14814613129664542,0.14514712916036876,0.14223578015088523,0.139416658286301,0.13669239433997152,0.134063541828487,0.13152860750097192,0.12908423161180943,0.1267254914016186,0.12444629310673865,0.12223981376237197,0.12009895389120998,0.11801676533989132,0.11598682426667004,0.11400352671052372,0.11206229241398555,0.11015967085942739,0.10829335119444101,0.10646208442885831,0.1046655317049833,0.10290405643631274,0.10117848063356212,0.09948982680934185,0.09783906652839011,0.0962268950246672,0.09465354844549079,0.09311867635045393,0.09162127729700903,0.09015969997200608,0.08873170674858241,0.08733459120553647,0.0859653365232838,0.08462079823775646,0.08329789298539525,0.0819937748581894,0.08070598286294012,0.07943254656681265,0.07817204191479507,0.07692359484113846,0.07568683597577919,0.07446181477050073,0.07324888513305085,0.07204857674857845,0.07086146652407621,0.06968806312477124,0.0685287147393029,0.06738354654481328,0.066252430455062,0.0651349861986155,0.06403061003597763,0.06293852572743512,0.061857851724047785,0.06078767878465355,0.05972715298454292,0.058675559983180525,0.0576324070985023,0.05659749995095177,0.05557101012101714,0.05455352952095443,0.053546106288060384,0.05255025633075098,0.05156794458364015,0.0506015308646849,0.04965367713771589,0.048727215936493457,0.047824983461751035,0.04694962500313056,0.046103384327845276,0.04528789194565358,0.044503969194154225,0.043751465516938565,0.0430291449645807,0.0423346349002953,0.041664445430806246,0.04101406268220447,0.04037811328218509,0.03975059190040692,0.0391251389774387,0.03849535224449001,0.03785511352455706,0.03719891164225775,0.0365221429204852,0.035821372455358894,0.035094541836938435,0.03434111193967405,0.033562132630097656,0.032760234614334305,0.031939542147581046,0.03110550898237416,0.030264683773097722,0.029424415152314812,0.028592510713995756,0.0277768679086796,0.026985097986134198,0.026224166146046383,0.02550007151621989,0.024817589107933934,0.024180092323716457,0.023589468996714092,0.023046136689219152,0.022549154705848277,0.022096421818936375,0.021684940989829055,0.021311126298233,0.020971123599701408,0.020661115589004214,0.020377584087489818,0.02011750727188205,0.019878476671353916,0.019658727279770954,0.0194570831186034,0.01927282907726572,0.019105526977605945,0.01895479887049101,0.018820103138145243,0.018700528888939145,0.018594631509356932,0.018500327440702437,0.018414859825296646,0.018334839294201252,0.018256356580606137,0.018175156567589373,0.018086857476012755,0.01798719470607033,0.017872266736204206,0.017738760627413943,0.01758413703224096,0.017406758899401874,0.017205953832205252,0.016982006681429056,0.016736085719839148,0.016470111931798693,0.016186585904755215,0.015888390027265872,0.01557858488980062,0.015260217905343288,0.01493615942055479,0.014608977395423543,0.014280856666629075,0.013953563530203737,0.013628451523970703,0.013306500407384726,0.012988377814224234,0.01267451208066496,0.012365165304931583,0.01206049755829057,0.01176061597153053,0.011465605703589303,0.011175543070429861,0.010890493923269464,0.010610502363443767,0.010335575852480522,0.010065672665637128,0.009800696548629327,0.00954050160954899,0.009284908245241096,0.009033728640666696,0.008786798453796842,0.008544010002615293,0.008305341790717177,0.008070879595972127,0.007840825518106467,0.007615493132290543,0.007395288940278159,0.007180682326130553,0.006972167903342139,0.006770225239330292,0.006575281312881758,0.006387680664878778,0.0062076671194129926,0.006035379352325767,0.0058708607015445355,0.005714081707971746,0.00556497219419325,0.005423458432996282,0.005289500263236036,0.005163122933585643,0.005044438975178983,0.004933656436897532,0.004831071229660703,0.004737042959958398,0.004651955323582459,0.004576163724701928,0.004509934152562223,0.0044533783867208784,0.004406391240910158,0.004368595753056612,0.004339301967966248,0.004317484245985414,0.004301780894191125,0.004290518408740815,0.004281760817195663,0.0042733826268351776,0.004263161858377563,0.004248887739437167,0.004228476029751136,0.004200083831150626,0.004162215256984261,0.004113809608344028,0.004054304767850604,0.003983670328935637,0.0039024073899799473,0.0038115147337068173,0.0037124239953990547,0.0036069090824306115,0.0034969772392705535,0.0033847505103515325,0.003272346786116437,0.003161769092852851,0.0030548103987554703,0.0029529791654538586,0.002857448467618013,0.002769029063108822,0.0026881646397676714,0.0026149458476601465,0.0025491388028758403,0.002490223555576972,0.0024374384651558783,0.002389827334403916,0.0023462872764829145,0.0023056163640388433,0.00226656091483445,0.0022278626541222773,0.002188305912245597,0.0021467645232870146,0.0021022473335346745,0.0020539404110571815,0.002001243388685731,0.001943797061507644,0.0018814995183519469,0.001814508744975076,0.0017432307271054812,0.0016682934515291614,0.001590508643526793,0.001510824361519812,0.001430272490179317,0.0013499155858135666,0.0012707973708320293,0.00119390047840246,0.0011201139302585497,0.0010502114695349612,0.0009848404769885618,0.000924519979054531,0.000869645377648635,0.0008204970992392339,0.0007772504029819828,0.0007399840571458548,0.0007086863792358412,0.0006832580866074421,0.0006635123557240644,0.0006491732875300647,0.0006398745075825061,0.0006351598273720702,0.0006344877485711409,0.000637241148048523,0.0006427428222144823,0.000650276802408915,0.0006591145918769021,0.0006685448210466178,0.0006779043481433816,0.0006866085908472784,0.0006941788714522535,0.0007002647715666902,0.000704659878194214,0.0007073098028673472,0.0007083119079150837,0.0007079067230806039,0.0007064615377695865,0.0007044470806838793,0.0007024085362609156,0.0007009323956183829,0.0007006108061963529,0.0007020051796583576,0.0007056108509250295,0.0007118245566838464,0.0007209164174558946,0.0007330079562356777,0.0007480574594522771,0.0007658536749071285,0.0007860184450671037,0.0008080184014046421,0.0008311853175774448,0.0008547441699470134,0.0008778474273170063,0.0008996136376019868,0.0009191680465927812,0.0009356828145660779,0.0009484144173904883,0.0009567360376153664,0.00096016315313222,0.0009583710797372525,0.0009512038642598276,0.000938674589909963,0.0009209577747819498,0.0008983750536969878,0.0008713756832982021,0.0008405135728339098,0.0008064225162984842,0.0007697911091112341,0.0007313385196359458,0.0006917919123914445,0.0006518659504838242,0.0006122444987659704,0.000573564450677189,0.0005364015326599816,0.000501257997158734,0.0004685522706190705,0.00043861082949962207,0.0004116627772203028,0.00038783773017374886,0.00036716764396397134,0.0003495930941066125,0.000334974266181619,0.0003231065334216202,0.0003137400531223208,0.0003066023613408459,0.0003014225578705167,0.0002979554138277671,0.0002960036482161039,0.00029543672744861127,0.00029620483280845116,0.000298347075855023,0.00030199355842795245,0.000307361396973989,0.0003147452852754635,0.0003245034933362962,0.0003370403555731928,0.0003527862823996276,0.0003721761626657831,0.00039562676578848037,0.0004235134761770534,0.0004561464782565412,0.0004937464273219091,0.0005364197344989564,0.0005841338731445002,0.0006366935492693042,0.0006937191026016212,0.0007546290217218459,0.00081862885630726,0.0008847089859620336,0.0009516535748867899,0.0010180625596516,0.0010823876874465404,0.001142982500700379,0.001198164855170742,0.0012462892029507272,0.0012858246283193287,0.0013154336498407081,0.0013340462303776397,0.0013409233603410508,0.0013357050371894672,0.0013184384347583906,0.0012895834602697025,0.0012499946066416845,0.0012008798605342018,0.0011437392442773195,0.0010802871784043326,0.001012364099849157,0.0009418435461697712,0.0008705411546244677,0.0008001317165252333,0.000732079614683613,0.000667586743757021,0.0006075604939605732,0.0005526027134419503,0.0005030189054905506,0.00045884540712508293,0.0004198910575344217,0.0003857889889192293,0.0003560537112144592,0.00033013862846238484,0.0003074894921399913,0.00028759000598139523,0.0002699967626814986,0.00025436181449046426,0.00024044235085073253,0.0002280980752775309,0.00021727785222427367,0.00020799796393019743,0.0002003148320106246,0.0001942952983835016,0.0001899875283007032,0.0001873953187664694,0.00018645810904073038,0.0001870383486809705,0.00018891714222885148,0.00019179832049715548,0.0001953203475216081,0.00019907481592041813,0.00020262975998017736,0.0002055556626513283,0.00020745187357543615,0.00020797119834486244,0.00020684065550893692,0.00020387680158500033,0.00019899455450693586,0.00019220904982808173,0.00018363068225044806,0.0001734540579325501,0.0001619420569693062,0.00014940653905029503,0.00013618739395729933,0.00012263163671417279,0.00010907408828698745,9.582089647173227e-05,8.313677934105892e-05,7.123646241154197e-05,6.0280377011077345e-05,5.037433153882383e-05,4.1572589353234625e-05,3.38836041282039e-05,2.727757975867053e-05],"type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}},"xaxis":{"title":{"text":"Potential Treatment Effect (ITC)","standoff":10},"showticklabels":true,"tickvals":[98,99,100,101,102]},"hoverlabel":{"font":{"size":16,"family":"Arial","color":"white"}},"title":{"text":"Treatment Effects are Laplace Distributed with \u03bc = 100 and b = 0.25"},"font":{"size":14},"showlegend":false,"yaxis":{"title":{"text":""},"showticklabels":false}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('a4c3c7e7-2f2e-4aab-9596-6fa6bc34b044');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-treament-effects-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Every treatment effect we simulate has an equal chance of being above or below 100
</figcaption>
</figure>
</div>
</div>
</div>
<p><strong>Reality Check</strong>: Though our significance test is designed to reliably detect effects at 101 or higher; our treatment effects have an equally likely chance of being above or below 100 (equality).</p>
</section>
<section id="simulate-dataset" class="level1">
<h1>Simulate Dataset</h1>
<p>Below we simulate data for 10,000 of our previously defined significance tests. Each simulated test has a treatment effect that is randomly sampled from our <code>Laplace</code> distribution.</p>
<div id="cell-fig-dataset" class="cell" data-execution_count="6">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> numpy.random <span class="im">import</span> seed, binomial, laplace</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> numpy <span class="im">import</span> repeat, cumsum, <span class="bu">round</span>, sqrt, array</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>null_average <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>scale <span class="op">=</span> <span class="fl">0.25</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>all_sims <span class="op">=</span> []</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>treatment_effect_samples <span class="op">=</span> laplace(</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    loc<span class="op">=</span>null_average, scale<span class="op">=</span>scale, size<span class="op">=</span>number_simulations</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>all_positive_effect_results <span class="op">=</span> []</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>all_negative_effect_results <span class="op">=</span> []</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> simulation_number <span class="kw">in</span> <span class="bu">range</span>(number_simulations):</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    treatment_effect_actual <span class="op">=</span> treatment_effect_samples[simulation_number]</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    control_daily_trials <span class="op">=</span> <span class="bu">int</span>(required_control_samples <span class="op">/</span> max_number_test_days)</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    treatment_daily_trials <span class="op">=</span> <span class="bu">int</span>(required_treatment_samples <span class="op">/</span> max_number_test_days)</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>    control_trials_list <span class="op">=</span> cumsum(repeat(control_daily_trials, max_number_test_days))</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>    treatment_trials_list <span class="op">=</span> cumsum(repeat(treatment_daily_trials, max_number_test_days))</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>    treatment_mean <span class="op">=</span> control_mean <span class="op">*</span> treatment_effect_actual <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>    control_events_list <span class="op">=</span> cumsum(</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>        binomial(control_daily_trials, control_mean, max_number_test_days)</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>    treatment_events_list <span class="op">=</span> cumsum(</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>        binomial(treatment_daily_trials, treatment_mean, max_number_test_days)</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>    p_control <span class="op">=</span> control_events_list <span class="op">/</span> control_trials_list</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>    p_treatment <span class="op">=</span> treatment_events_list <span class="op">/</span> treatment_trials_list</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>    delta_list <span class="op">=</span> p_treatment <span class="op">-</span> p_control</span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>    observed_effect_list <span class="op">=</span> (</span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>        treatment_events_list</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span> control_trials_list</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>        <span class="op">/</span> (control_events_list <span class="op">*</span> treatment_trials_list)</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>    standard_error <span class="op">=</span> sqrt(</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>        (p_control <span class="op">*</span> (<span class="dv">1</span> <span class="op">-</span> p_control) <span class="op">/</span> control_trials_list)</span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>        <span class="op">+</span> (p_treatment <span class="op">*</span> (<span class="dv">1</span> <span class="op">-</span> p_treatment) <span class="op">/</span> treatment_trials_list)</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Compute Z-score</span></span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>    z_score <span class="op">=</span> <span class="bu">round</span>((delta_list <span class="op">-</span> <span class="dv">0</span>) <span class="op">/</span> standard_error, <span class="dv">2</span>)</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>    p_values <span class="op">=</span> array([<span class="dv">1</span> <span class="op">-</span> norm.cdf(z) <span class="cf">for</span> z <span class="kw">in</span> z_score])</span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>    inner_dict <span class="op">=</span> {</span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>        <span class="st">"experiment_number"</span>: simulation_number <span class="op">+</span> <span class="dv">1</span>,</span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Day"</span>: [<span class="bu">int</span>(i <span class="op">+</span> <span class="dv">1</span>) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(max_number_test_days)],</span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>        <span class="st">"control trials"</span>: control_trials_list.astype(<span class="bu">int</span>),</span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>        <span class="st">"control rate (%)"</span>: <span class="bu">round</span>(<span class="dv">100</span> <span class="op">*</span> p_control, <span class="dv">2</span>),</span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a>        <span class="st">"treatment trials"</span>: treatment_trials_list,</span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>        <span class="st">"treatment rate (%)"</span>: <span class="bu">round</span>(<span class="dv">100</span> <span class="op">*</span> p_treatment, <span class="dv">2</span>),</span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a>        <span class="st">"delta (%)"</span>: <span class="bu">round</span>(delta_list <span class="op">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>        <span class="st">"z-score"</span>: z_score,</span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a>        <span class="st">"p-value"</span>: p_values,</span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>        <span class="st">"true_effect"</span>: treatment_effect_actual,</span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a>    all_sims.append(inner_dict)</span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> treatment_effect_actual <span class="op">&gt;=</span> <span class="dv">100</span>:</span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a>        all_positive_effect_results.append(inner_dict)</span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a>        all_negative_effect_results.append(inner_dict)</span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a>sim_df <span class="op">=</span> pd.DataFrame(inner_dict)</span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a><span class="kw">del</span> sim_df[<span class="st">"p-value"</span>]</span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a><span class="kw">del</span> sim_df[<span class="st">"true_effect"</span>]</span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(</span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f"Random Treatment Effect Programmed into Treatment: </span><span class="sc">{</span>treatment_effect_actual<span class="op">/</span><span class="dv">100</span><span class="sc">:.3%}</span><span class="ss">"</span></span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-78"><a href="#cb5-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-79"><a href="#cb5-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-80"><a href="#cb5-80" aria-hidden="true" tabindex="-1"></a>display(HTML(sim_df[sim_df.columns[<span class="dv">1</span>:]].to_html(index<span class="op">=</span><span class="va">False</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Random Treatment Effect Programmed into Treatment: 100.132%</code></pre>
</div>
<div id="fig-dataset" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-dataset-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">Day</th>
<th data-quarto-table-cell-role="th">control trials</th>
<th data-quarto-table-cell-role="th">control rate (%)</th>
<th data-quarto-table-cell-role="th">treatment trials</th>
<th data-quarto-table-cell-role="th">treatment rate (%)</th>
<th data-quarto-table-cell-role="th">delta (%)</th>
<th data-quarto-table-cell-role="th">z-score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>24729</td>
<td>50.13</td>
<td>24729</td>
<td>50.14</td>
<td>0.01</td>
<td>0.02</td>
</tr>
<tr class="even">
<td>2</td>
<td>49458</td>
<td>50.10</td>
<td>49458</td>
<td>50.38</td>
<td>0.28</td>
<td>0.87</td>
</tr>
<tr class="odd">
<td>3</td>
<td>74187</td>
<td>50.00</td>
<td>74187</td>
<td>50.24</td>
<td>0.23</td>
<td>0.90</td>
</tr>
<tr class="even">
<td>4</td>
<td>98916</td>
<td>49.87</td>
<td>98916</td>
<td>50.29</td>
<td>0.42</td>
<td>1.85</td>
</tr>
<tr class="odd">
<td>5</td>
<td>123645</td>
<td>49.98</td>
<td>123645</td>
<td>50.16</td>
<td>0.19</td>
<td>0.93</td>
</tr>
</tbody>
</table>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-dataset-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: The output of our last simulation; among 10,000 in total.
</figcaption>
</figure>
</div>
</div>
</section>
<section id="proper-significance-test" class="level1">
<h1>Proper Significance Test</h1>
<p>To avoid <code>P-hacking</code>, we only consider a <code>p-value</code> at the conclusion of our test.</p>
<div id="cell-fig-sig-test" class="cell" data-execution_count="7">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> norm</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>p_values_display <span class="op">=</span> p_values.<span class="bu">round</span>(<span class="dv">3</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>inner_dict[<span class="st">"p-value"</span>] <span class="op">=</span> p_values_display</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>sim_df <span class="op">=</span> pd.DataFrame(inner_dict)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="kw">del</span> sim_df[<span class="st">"true_effect"</span>]</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>display(HTML(sim_df[sim_df.columns[<span class="dv">1</span>:]].tail(<span class="dv">1</span>).to_html(index<span class="op">=</span><span class="va">False</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-sig-test" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-sig-test-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">Day</th>
<th data-quarto-table-cell-role="th">control trials</th>
<th data-quarto-table-cell-role="th">control rate (%)</th>
<th data-quarto-table-cell-role="th">treatment trials</th>
<th data-quarto-table-cell-role="th">treatment rate (%)</th>
<th data-quarto-table-cell-role="th">delta (%)</th>
<th data-quarto-table-cell-role="th">z-score</th>
<th data-quarto-table-cell-role="th">p-value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>5</td>
<td>123645</td>
<td>49.98</td>
<td>123645</td>
<td>50.16</td>
<td>0.19</td>
<td>0.93</td>
<td>0.176</td>
</tr>
</tbody>
</table>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-sig-test-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: A proper significance test only checks the p-value at the conclusion of a test.
</figcaption>
</figure>
</div>
</div>
<p>Let’s check the results of our 10,000 simulations. Recall that 50% of the time; treatment effects are less than 100.</p>
<section id="treatment-effect-100" class="level2">
<h2 class="anchored" data-anchor-id="treatment-effect-100">Treatment Effect &lt; 100</h2>
<p>When our true Treatment Effect &lt; 100, our significance test performs very well.</p>
<div id="e4b778b0" class="cell" data-execution_count="8">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> numpy <span class="im">import</span> mean, where</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>final_df <span class="op">=</span> pd.concat(<span class="bu">map</span>(pd.DataFrame, all_negative_effect_results), ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>final_df <span class="op">=</span> final_df[final_df.Day <span class="op">==</span> max_number_test_days]</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>negative_effect_accuracy <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> mean(where(final_df[<span class="st">"p-value"</span>] <span class="op">&lt;</span> <span class="fl">0.05</span>, <span class="dv">1</span>, <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Retained Control</strong>: 98.17%; Treatment correctly didn’t reach <code>Significance (α) = 0.05</code>.</p>
</section>
<section id="treatment-effect-100-1" class="level2">
<h2 class="anchored" data-anchor-id="treatment-effect-100-1">Treatment Effect &gt; 100</h2>
<p>When our true Treatment Effect &gt; 100, our significance test performs terribly. Why? <br>Our test was designed to detect <code>101</code>, but effects are centered at 100.</p>
<div id="d102d360" class="cell" data-execution_count="9">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> numpy <span class="im">import</span> mean, where, array</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>final_df <span class="op">=</span> pd.concat(<span class="bu">map</span>(pd.DataFrame, all_positive_effect_results), ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>final_df <span class="op">=</span> final_df[final_df.Day <span class="op">==</span> max_number_test_days]</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>positive_effect_accuracy <span class="op">=</span> mean(where(final_df[<span class="st">"p-value"</span>] <span class="op">&lt;</span> alpha, <span class="dv">1</span>, <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Picked Treatment</strong>: 17.92%; Treatment correctly reached <code>Significance (α) = 0.05</code>.</p>
</section>
</section>
<section id="improper-significance-test" class="level1">
<h1>Improper Significance Test</h1>
<p>Let’s break the rules!!! Let’s glance at <code>p-value</code> every day of our test.<br> <em><strong><code>Significance Rule</code></strong></em>: p-value &lt; 0.05 <br> <em><strong><code>Futility Rule</code></strong></em>: p-value &gt; 0.95</p>
<div id="cell-fig-bad-sig-test" class="cell" data-execution_count="10">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> norm</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Build all sims for analysis</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>later_df <span class="op">=</span> pd.concat(<span class="bu">map</span>(pd.DataFrame, all_sims), ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate First Occurence of p-value &lt; 0.05 for every simulated experiment</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>first_day_occurrence <span class="op">=</span> (</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    later_df[later_df[<span class="st">"p-value"</span>] <span class="op">&lt;</span> alpha].groupby(<span class="st">"experiment_number"</span>)[<span class="st">"Day"</span>].<span class="bu">min</span>()</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>later_df[<span class="st">"first_occurrence_sig"</span>] <span class="op">=</span> later_df[<span class="st">"experiment_number"</span>].<span class="bu">map</span>(</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    first_day_occurrence</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>later_df[<span class="st">"first_occurrence_sig"</span>] <span class="op">=</span> later_df[<span class="st">"first_occurrence_sig"</span>].fillna(</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    max_number_test_days</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate First Occurence of Futility p-value &gt; 0.95 for every simulated experiment</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>first_day_occurrence_futility <span class="op">=</span> (</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    later_df[later_df[<span class="st">"p-value"</span>] <span class="op">&gt;</span> <span class="dv">1</span> <span class="op">-</span> alpha].groupby(<span class="st">"experiment_number"</span>)[<span class="st">"Day"</span>].<span class="bu">min</span>()</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>later_df[<span class="st">"first_day_occurrence_futility"</span>] <span class="op">=</span> later_df[<span class="st">"experiment_number"</span>].<span class="bu">map</span>(</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>    first_day_occurrence_futility</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>later_df[<span class="st">"first_day_occurrence_futility"</span>] <span class="op">=</span> later_df[</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">"first_day_occurrence_futility"</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>].fillna(max_number_test_days)</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Determine Which Takes Place First</span></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>later_df[<span class="st">"first_day"</span>] <span class="op">=</span> later_df[</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"first_occurrence_sig"</span>, <span class="st">"first_day_occurrence_futility"</span>]</span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>].<span class="bu">min</span>(axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Display</span></span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>display(</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>    HTML(</span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>        later_df[later_df.columns[<span class="dv">1</span> : <span class="bu">len</span>(later_df.columns) <span class="op">-</span> <span class="dv">4</span>]]</span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>        .tail(<span class="dv">5</span>)</span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>        .to_html(index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-bad-sig-test" class="cell-output cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bad-sig-test-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">Day</th>
<th data-quarto-table-cell-role="th">control trials</th>
<th data-quarto-table-cell-role="th">control rate (%)</th>
<th data-quarto-table-cell-role="th">treatment trials</th>
<th data-quarto-table-cell-role="th">treatment rate (%)</th>
<th data-quarto-table-cell-role="th">delta (%)</th>
<th data-quarto-table-cell-role="th">z-score</th>
<th data-quarto-table-cell-role="th">p-value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>24729</td>
<td>50.13</td>
<td>24729</td>
<td>50.14</td>
<td>0.01</td>
<td>0.02</td>
<td>0.492</td>
</tr>
<tr class="even">
<td>2</td>
<td>49458</td>
<td>50.10</td>
<td>49458</td>
<td>50.38</td>
<td>0.28</td>
<td>0.87</td>
<td>0.192</td>
</tr>
<tr class="odd">
<td>3</td>
<td>74187</td>
<td>50.00</td>
<td>74187</td>
<td>50.24</td>
<td>0.23</td>
<td>0.90</td>
<td>0.184</td>
</tr>
<tr class="even">
<td>4</td>
<td>98916</td>
<td>49.87</td>
<td>98916</td>
<td>50.29</td>
<td>0.42</td>
<td>1.85</td>
<td>0.032</td>
</tr>
<tr class="odd">
<td>5</td>
<td>123645</td>
<td>49.98</td>
<td>123645</td>
<td>50.16</td>
<td>0.19</td>
<td>0.93</td>
<td>0.176</td>
</tr>
</tbody>
</table>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bad-sig-test-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Breaking the rules of significance testing allows us more easily detect winners.
</figcaption>
</figure>
</div>
</div>
<section id="treatment-effect-100-2" class="level2">
<h2 class="anchored" data-anchor-id="treatment-effect-100-2">Treatment Effect &lt; 100</h2>
<p>When our true Treatment Effect &lt; 100, our significance test performs a little worse.</p>
<div id="12c06117" class="cell" data-execution_count="11">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Shrink datasets to only final day records</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>small_df <span class="op">=</span> later_df[later_df.Day <span class="op">==</span> later_df.first_day]</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Zoom into experiments where true effect &lt; 100</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>negative_df <span class="op">=</span> small_df[small_df.true_effect <span class="op">&lt;</span> <span class="dv">100</span>]</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate runtime of experiment</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>avg_number_days <span class="op">=</span> negative_df[<span class="st">"Day"</span>].mean()</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate accuracy of retaining control</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>negative_effect_accuracy <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> mean(where(negative_df[<span class="st">"p-value"</span>] <span class="op">&lt;</span> alpha, <span class="dv">1</span>, <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Retained Control</strong>: 92.67%; Treatment correctly didn’t reach <code>Significance (α) = 0.05</code>. <br> <strong>Avg runtime</strong>: 4.07</p>
</section>
<section id="treatment-effect-100-3" class="level2">
<h2 class="anchored" data-anchor-id="treatment-effect-100-3">Treatment Effect &gt; 100</h2>
<p>When our true Treatment Effect &gt; 100, our Improper significance test performs better than a proper one. And it takes 20% less time to confirm a winner.</p>
<div id="7d12e338" class="cell" data-execution_count="12">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> numpy <span class="im">import</span> mean, where, array</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>small_df <span class="op">=</span> later_df[later_df.Day <span class="op">==</span> later_df.first_day]</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>positive_df <span class="op">=</span> small_df [small_df.true_effect <span class="op">&gt;</span> <span class="dv">100</span>]</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>avg_number_days <span class="op">=</span> positive_df[<span class="st">"Day"</span>].mean()</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>positive_effect_accuracy <span class="op">=</span> mean(where(positive_df[<span class="st">"p-value"</span>] <span class="op">&lt;</span> alpha , <span class="dv">1</span>, <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Picked Treatment</strong>: 28.27%; Treatment correctly reached <code>Significance (α) = 0.05</code>. <br> <strong>Avg runtime</strong>: 4.09</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>